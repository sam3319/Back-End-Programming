## Servlet의 기본 개념

서블릿은 **HttpServlet 클래스를 상속받은 자바 클래스**로, 확장자가 .java인 일반적인 자바 클래스와 동일한 개념이지만 웹을 다룰 수 있도록 특화된 기능을 제공한다. 서블릿의 가장 큰 특징은 **Java 코드 안에 HTML 태그가 삽입되는 형태**로 작성된다는 점.

서블릿은 클라이언트의 요청을 처리하고 그 결과를 다시 클라이언트에게 전송하는 servlet 클래스의 구현 규칙을 지킨 자바 프로그램으로 정의할 수 있다. 이는 자바 언어를 웹 애플리케이션 개발에 더 쉽게 활용할 수 있도록 만든 API(라이브러리, 클래스들)의 집합.

## Servlet의 생명주기 (Life Cycle)

서블릿은 명확한 생명주기를 가지며, 서블릿 컨테이너에 의해 관리된다. 서블릿의 생명주기는 다음 세 가지 주요 메소드로 구성된다.

### **init() 메소드**

서블릿이 처음으로 요청될 때 초기화를 수행하는 메소드. 클래스를 new 해서 사용하듯 서블릿 클래스도 초기화해 주어야 사용이 가능하다. **서블릿은 싱글톤으로 관리**되어 한 번 초기화된 후에는 다음 요청에서 기존 서블릿 인스턴스를 재사용한다.

### **service() 메소드**

들어온 요청을 분석하고 그에 대해 알맞은 처리를 수행하는 메소드. 이 메소드는 요청의 HTTP 메소드에 따라 적절한 doXXX 메소드(doGet, doPost 등)로 요청을 전달(dispatch)하여 응답을 처리한다.

### **destroy() 메소드**

서비스가 끝나고 나면 destroy 메소드를 통해 서블릿을 삭제한다. 이는 서블릿의 생명주기가 완료될 때 호출된다.

## Servlet Container (서블릿 컨테이너)

서블릿 컨테이너는 서블릿을 관리하고 실행시키는 프로그램으로, **Servlet Engine** 또는 **Web Container**라고도 불린다.. 대표적인 예로 **톰캣(Tomcat)**이 있다.

### **서블릿 컨테이너의 주요 역할**

**웹 서버와의 통신 지원**: 서블릿 컨테이너는 웹 서버와 소켓으로 통신하며, 개발자가 복잡한 네트워크 통신을 직접 구현하지 않아도 되도록 지원한다.

**서블릿 생명주기 관리**: 서블릿 객체의 생성, 초기화, 호출, 종료를 관리하며, 서블릿 객체는 싱글톤으로 관리된다.

**멀티스레드 지원**: 동시에 여러 요청이 와도 멀티스레드 환경으로 동시 작업을 수행할 수 있도록 지원한다.

**반복 작업 처리**: 서버 TCP/IP 연결, Request/Response 객체 생성, HTTP 메시지 파싱 등의 반복적인 작업을 대신 수행한다.

## Servlet 동작 과정

1. **사용자가 URL을 입력**하면 HTTP Request가 Servlet Container로 전송된다.
2. **서블릿 컨테이너가 HttpServletRequest, HttpServletResponse 객체를 생성**한다.
3. **web.xml 또는 @WebServlet 어노테이션을 기반으로** 요청 URL과 매핑된 서블릿을 찾는다.
4. **해당 서블릿 인스턴스가 없으면 init() 메소드를 호출**하여 서블릿을 생성한다.
5. **service() 메소드를 호출**한 후 클라이언트의 GET, POST 여부에 따라 doGet() 또는 doPost()를 호출한다.
6. **doGet() 또는 doPost() 메소드가 동적 페이지를 생성**한 후 HttpServletResponse 객체에 응답을 보낸다.
7. **응답 처리 완료 후** Request, Response 객체를 소멸시킨다.

## Servlet과 JSP의 관계

서블릿과 JSP는 상호 보완적인 관계에 있다. **서블릿은 Java 코드 안에 HTML 태그가 삽입되는 형태**인 반면, **JSP는 HTML 문서 안에 Java 코드를 삽입하는 형태**.

현재는 각각의 장점을 활용하여 **MVC Model2 방식**으로 개발이 이루어지고 있다.

- **Servlet**: 자바 코드 작성이 편리하여 **Controller 역할**을 담당
- **JSP**: HTML 태그 사용이 용이하여 **View 역할**을 담당

이러한 분업을 통해 프레젠테이션 로직과 비즈니스 로직을 분리하여 유지보수성을 향상시킬 수 있습다. JSP 파일은 결국 서블릿으로 변환되어 실행되므로, JSP의 동작 방식을 이해하기 위해서는 서블릿에 대한 이해가 필요하다.
